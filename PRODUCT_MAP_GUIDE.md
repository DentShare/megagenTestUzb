# Карта продукции — руководство

**Карта продукции** — это настраиваемое меню в боте, где вы сами создаёте кнопки, вкладываете кнопки в кнопки и привязываете PDF/PNG файлы.

---

## 1. Где настраивать

- **Конфиг:** `product_map_config.json` — структура кнопок и ссылки на файлы
- **Файлы:** папка `product_map_files/` — сюда кладите PDF и PNG

---

## 2. Структура конфига (JSON)

Каждый пункт меню — это либо **подменю** (кнопки внутри), либо **файл** (PDF/PNG).

### Подменю (кнопки в кнопках)

```json
"Название раздела": {
  "children": {
    "Подраздел 1": { ... },
    "Подраздел 2": { ... }
  }
}
```

### Файл (PDF или PNG)

```json
"Название файла": {
  "file": "имя_файла.pdf"
}
```

или

```json
"Схема": {
  "file": "scheme.png"
}
```

---

## 3. Примеры

### Простая структура (2 уровня)

```json
{
  "Импланты": {
    "children": {
      "Инструкция AnyOne": { "file": "anyone_manual.pdf" },
      "Инструкция AnyRidge": { "file": "ar_manual.pdf" }
    }
  },
  "Протетика": {
    "children": {
      "Каталог": { "file": "prosthetics.pdf" }
    }
  }
}
```

### Вложенные кнопки (3+ уровней)

```json
{
  "Импланты": {
    "children": {
      "AnyOne": {
        "children": {
          "Инструкция": { "file": "anyone_instruction.pdf" },
          "Схема размеров": { "file": "anyone_sizes.png" }
        }
      },
      "AnyRidge": {
        "children": {
          "Каталог": { "file": "ar_catalog.pdf" }
        }
      }
    }
  }
}
```

### Файл сразу в корне (без подменю)

```json
{
  "Общий каталог": { "file": "full_catalog.pdf" }
}
```

---

## 4. Как загрузить файлы

1. Создайте папку `product_map_files/` (если её нет).
2. Положите туда PDF и PNG файлы.
3. В `product_map_config.json` укажите имя файла в поле `"file"`:

```json
"Инструкция": { "file": "my_instruction.pdf" }
```

Имя файла должно совпадать с именем в папке. Поддерживаются: `.pdf`, `.png`, `.jpg`, `.jpeg`.

---

## 5. Правила

- Ключи, начинающиеся с `_`, игнорируются (можно использовать для комментариев).
- В `"file"` указывайте только имя файла, без пути.
- Не используйте `..` в имени файла (защита от выхода за пределы папки).
- Callback в Telegram ограничен 64 байтами — длинные пути могут обрезаться; лучше короткие названия.

---

## 6. Полный пример

**product_map_config.json:**

```json
{
  "_comment": "Редактируйте этот файл",
  "Импланты": {
    "children": {
      "AnyOne": {
        "children": {
          "Инструкция": { "file": "anyone_instruction.pdf" },
          "Схема": { "file": "anyone_scheme.png" }
        }
      },
      "AnyRidge": {
        "children": {
          "Каталог": { "file": "ar_catalog.pdf" }
        }
      }
    }
  },
  "Протетика": {
    "children": {
      "Общий каталог": { "file": "prosthetics.pdf" }
    }
  }
}
```

**Папка product_map_files/:**

```
product_map_files/
  anyone_instruction.pdf
  anyone_scheme.png
  ar_catalog.pdf
  prosthetics.pdf
```

---

## 7. После изменений

Перезапустите бота, чтобы подхватить изменения в `product_map_config.json`. Файлы в `product_map_files/` можно добавлять и менять без перезапуска.
